# MCP Logger ([English](README.md) | [日本語](README.ja.md) | [한국어](README.ko.md) | [简体中文](README.zh-CN.md) | [繁體中文](README.zh-TW.md) | [Tiếng Việt](README.vi.md) | [ไทย](README.th.md) | [हिन्दी](README.hi.md) | [العربية](README.ar.md) | [Русский](README.ru.md))

## Обзор
Этот проект предоставляет сервер MCP (Model Context Protocol), который позволяет ИИ-ассистентам (таким как Claude, Gemini и др.) использовать инфраструктуру Syslog для логирования и мониторинга.
Сам по себе он не является "сервером Syslog", а предоставляет "функциональность клиента" для ИИ, чтобы отправлять логи на существующий сервер Syslog (например, `rsyslog`, `syslog-ng` или `vlt-syslogd`).

Этот проект разделяет основную логику с `rust-logger` (CLI-логгер для людей), предоставляя при этом оптимизированный интерфейс для взаимодействия с ИИ.

## Основные возможности
- **Отправка сообщений Syslog**: ИИ может указывать сервер, порт, объект (facility), важность (severity), тег, кодировку и сообщение для отправки Syslog.
- **Поддержка многобайтовых символов (UTF-8 с BOM)**: Специально разработан для правильной обработки символов, отличных от ASCII (русский, японский, китайский, корейский и др.), чтобы гарантировать отсутствие ошибок шрифта при анализе ИИ.
- **Двойной дизайн CLI-MCP**: Работает как автономный инструмент CLI для людей и как сервер MCP для ИИ.

## Установка
Требуется среда Rust.

```bash
cargo build --release
```

## Как использовать (двойной режим CLI / MCP)

Этот инструмент объединяет "CLI для людей" и "сервер MCP для ИИ".

### 1. Режим CLI для людей
Вы можете отправлять логи прямо из терминала.

```bash
# Базовая отправка
mcp-logger send 192.168.1.100 "Привет из CLI"

# Отправка с опциями
mcp-logger send 192.168.1.100 "Произошла ошибка" --severity error --tag my-app
```

Запуск `mcp-logger` без аргументов в терминале отобразит **руководство по настройке MCP**.

### 2. Режим ИИ-ассистента (MCP)
Добавьте следующее содержимое в ваш файл `claude_desktop_config.json` или аналогичный файл конфигурации.

```json
{
  "mcpServers": {
    "mcp-logger": {
      "command": "/path/to/mcp-logger",
      "args": ["run-mcp"]
    }
  }
}
```

## Инструменты MCP (Tools)
Возможности, доступные для ИИ.

### `send-syslog`
Отправляет сообщение Syslog на указанный сервер.

**Аргументы (Arguments):**
- `server` (string, обязательно): Имя хоста или IP-адрес сервера Syslog.
- `port` (number): Номер порта (по умолчанию: `514`).
- `facility` (string): Объект (например, `user`, `local0`), по умолчанию `user`.
- `severity` (string): Важность (например, `info`, `error`), по умолчанию `info`.
- `tag` (string): Имя программы (тег), по умолчанию `mcp-syslog`.
- `encoding` (string): Кодировка (например, `utf-8`), по умолчанию `utf-8`.
- `message` (string, обязательно): Текст лога.

## Важно: Обработка многобайтовых символов
Для языков, использующих многобайтовые символы (например, русский), ИИ рекомендуется использовать `utf-8`. Сервер автоматически добавит **UTF-8 BOM**, чтобы серверы Syslog и последующие инструменты анализа правильно распознавали кодировку.

## Документация
- [Подробное руководство](docs/MANUAL.ru.md)
- [Руководство по кроссплатформенной настройке](docs/CROSS_PLATFORM_SETUP.ru.md)
- [Руководство по настройке LM Studio](docs/LM_STUDIO_SETUP.ru.md)
- [Примеры протокола MCP](docs/MCP_PROTOCOL_EXAMPLES.ru.md)
- [Техническая спецификация (SPEC)](docs/SPEC.md)

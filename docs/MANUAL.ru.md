# MCP Logger - Подробное руководство

## 1. Введение
`mcp-logger` — это сервер MCP (Model Context Protocol), предназначенный для связи между ИИ-ассистентами и инфраструктурой Syslog. Это позволяет ИИ использовать Syslog для логирования и отслеживания состояния.

## 2. Конфигурация

### Claude Desktop
Добавьте это в ваш файл `%APPDATA%\Claude\claude_desktop_config.json` (Windows) или `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS).

```json
{
  "mcpServers": {
    "mcp-logger": {
      "command": "/path/to/mcp-logger",
      "args": ["run-mcp"]
    }
  }
}
```

## 3. Справочник инструментов

### `send-syslog`
Отправляет сообщение на сервер Syslog.

| Параметр | Тип | По умолчанию | Описание |
| :--- | :--- | :--- | :--- |
| `server` | string | (обяз.) | IP или имя хоста целевого сервера. |
| `port` | number | 514 | Номер порта UDP. |
| `facility` | string | user | Объект Syslog (kern, user, mail и др.) |
| `severity` | string | info | Важность Syslog (emerg, alert, crit, err, warning, notice, info, debug) |
| `tag` | string | mcp-syslog | Имя программы / тег. |
| `encoding` | string | utf-8 | Кодировка символов. |
| `message` | string | (обяз.) | Содержимое лога. |

## 4. Руководство по многобайтовым символам (для кириллицы и других не-ASCII языков)
Если вы используете русский язык или другие языки с многобайтовыми символами, следуйте этим рекомендациям:

### Рекомендация: Используйте UTF-8
`mcp-logger` оптимизирован для UTF-8. Он автоматически определяет наличие не-ASCII символов в сообщении и при необходимости предоставляет **UTF-8 BOM (Byte Order Mark)**.

### Взаимодействие с серверами Syslog
Многие серверы Syslog для Windows (например, `vlt-syslogd`) или современные настройки `rsyslog` в Linux могут обрабатывать UTF-8, если они правильно идентифицированы. BOM гарантирует, что эти инструменты не интерпретируют логи как устаревшие локальные кодировки (например, CP1251).

## 5. Устранение неполадок
- **ИИ не распознает инструмент**: Убедитесь, что путь в конфигурационном файле является абсолютным.
- **Логи не доходят**: Проверьте, открыт ли порт UDP 514 в брандмауэре целевого сервера.
- **Ошибки кодировки**: Убедитесь, что параметр `encoding` установлен в `utf-8`.

## 6. Дополнительные руководства
- [Кроссплатформенная настройка](CROSS_PLATFORM_SETUP.ru.md)
- [Настройка LM Studio](LM_STUDIO_SETUP.ru.md)
- [Примеры протокола MCP](MCP_PROTOCOL_EXAMPLES.ru.md)
- [Техническая спецификация (SPEC)](SPEC.md)
